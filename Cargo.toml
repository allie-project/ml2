[package]
name = "libglide"
version = "0.1.0"
authors = [
	"pyke.io",
    "Luca Palmieri <rust@lpalmieri.com>",
    "Lorenz Schmidt <bytesnake@mailbox.org>",
    "Paul KÃ¶rbitz <koerbitz@google.com>"
]
description = "Neural network utilities"
edition = "2021"
license = "MIT/Apache-2.0"
repository = "https://github.com/allie-project/libglide"
readme = "README.md"
keywords = [ "machine-learning", "ai", "ml" ]
categories = [ "algorithms", "mathematics", "science" ]
exclude = [ ".github/", ".vscode/", "test/" ]

[lib]
crate-type = [ "lib", "dylib" ]
name = "glide"

[features]
default = []

netlib-static = ["blas", "ndarray-linalg/netlib-static"]
netlib-system = ["blas", "ndarray-linalg/netlib-system"]

openblas-static = ["blas", "ndarray-linalg/openblas-static"]
openblas-system = ["blas", "ndarray-linalg/openblas-system"]

intel-mkl-static = [ "blas", "ndarray-linalg/intel-mkl-static" ]
intel-mkl-system = [ "blas", "ndarray-linalg/intel-mkl-system" ]

cuda = []
blas = [ "ndarray/blas" ]
serde = [ "serde_crate", "ndarray/serde" ]

generate-bindings = [ "bindgen" ]

# used to prevent issues with docs.rs
disable-sys-build-script = []

[package.metadata.docs.rs]
features = [ "disable-sys-build-script" ]

[dependencies]
num-traits = "0.2"
rand = { version = "0.8", features = [ "small_rng" ] }
approx = "0.4"
ndarray = { version = "0.15", features = [ "approx" ] }
ndarray-linalg = { version = "0.14", optional = true }
thiserror = "1.0"
anyhow = { version = "<=1.0.48" }

[dependencies.serde_crate]
package = "serde"
optional = true
version = "1.0"
default-features = false
features = [ "std", "derive" ]

[dev-dependencies]
ndarray-npy = "0.8"
ndarray-rand = "0.14"
libglide-datasets = { path = "datasets", features = [ "winequality", "iris", "diabetes" ] }

[build-dependencies]
bindgen = { version = "0.59", optional = true }
ureq = "2.1"

[target.'cfg(target_os = "windows")'.build-dependencies]
zip = { version = "0.6", default-features = false, features = [ "deflate" ] }

[target.'cfg(not(target_os = "windows"))'.build-dependencies]
flate2 = "1.0"
tar = "0.4"

[workspace]
members = [ "datasets" ]

[profile.release]
opt-level = 3
